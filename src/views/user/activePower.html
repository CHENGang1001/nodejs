<div class="layui-card layadmin-header">
	<div class="layui-breadcrumb" lay-filter="breadcrumb">
		<a lay-href="user/runMessage">概览</a>
		<a><cite>电网调度</cite></a>
		<a><cite>有功功率</cite></a>
	</div>
</div>

<div class="layui-fluid">
	<div class="layui-row layui-col-space15">
		<div class="layui-card">
			<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
				<legend id="legend" style="font-size: 20px;">有功功率</legend>
			</fieldset>
			<div class="layui-form">
				<div class="layui-form-item" style="margin-left: 16px;">
					<input type="radio" name="isEMUor" value="EMU" title="EMU" checked="checked" lay-filter="radioFilter">
					<input type="radio" name="isEMUor" value="本地功率调节" title="本地功率调节" lay-filter="radioFilter">
					<div style="float: right;">
						<label style="font-size: 12px;color: red;">*“EMU”设置与“本地功率调节”只能选择一个</label>
					</div>
				</div>
			</div>
			<hr />

			<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">

				<ul class="layui-tab-title">
					<li class="layui-this">有功控制</li>
					<li>九州调度</li>
				</ul>

				<div class="layui-tab-content">
					<!--有功控制-->
					<div class="layui-tab-item layui-show" align="center">

						<div class="layui-form">
							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">接线模式</label>
									<div class="layui-input-inline">
										<select name="quiz">
											<option value="直连模式" selected>直连模式</option>
											<option value="级联主机模式">级联主机模式</option>
										</select>
									</div>
								</div>
							</div>

							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">控制模式</label>
									<div class="layui-input-inline">
										<select name="quiz">
											<option value="0" selected>有功控制</option>
										</select>
									</div>
								</div>
							</div>

							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">时间间隔</label>
									<div class="layui-input-inline">
										<select name="quiz">
											<option value="0" selected>10s</option>
											<option value="1">20s</option>
											<option value="2">30s</option>
										</select>
									</div>
								</div>
							</div>
							<div class="layui-form-item">
								<button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
							</div>
						</div>
						<hr />

						<div class="layui-form">
							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">日志选择</label>
									<div class="layui-input-inline">
										<select name="quiz">
											<option value="0" selected>emu_cn.log</option>
										</select>
									</div>
								</div>
							</div>
							<div class="layui-form-item">
								<button class="layui-btn" lay-submit="" lay-filter="demo1">日志导出</button>
							</div>
						</div>
					</div>
					<!--九州调度-->
					<div class="layui-tab-item" align="center">
						<div class="layui-form">
							<div class="layui-form-item">
								<div class="layui-input-inline">
									<input type="radio" name="isRemoteor" value="远程调度" title="远程调度" checked="">
								</div>
							</div>

							<div class="layui-form-item">
								<label class="layui-form-label">电站编号</label>
								<div class="layui-input-block">
									<input type="text" name="identity" lay-verify="" placeholder="" autocomplete="off" class="layui-input" value="333635362526373">
								</div>

							</div>

							<div class="layui-form-item">
								<label class="layui-form-label">编号校验</label>
								<div class="layui-input-block">
									<input type="text" name="identity" lay-verify="" placeholder="" autocomplete="off" class="layui-input" value="8">
								</div>
							</div>

							<div class="layui-form-item">
								<label class="layui-form-label">时间范围</label>
								<div class="layui-input-block">
									<input type="text" name="identity" lay-verify="" placeholder="" autocomplete="off" class="layui-input" value="13:44:00~13:59:09">
								</div>

							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">下载网址</label>
								<div class="layui-input-block">
									<select name="quiz">
										<option value="0" selected>http://www.google.com</option>
									</select>
								</div>

							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">证书导入</label>
								<div class="layui-input-inline">

									<input type="text" name="identity" lay-verify="" placeholder="" autocomplete="off" class="layui-input" value="index.html">
								</div>
								<div class="layui-input-inline">

									<button type="button" class="layui-btn" id="test3"><i class="layui-icon"></i>上传证书</button>

								</div>

							</div>

							<hr />

							<div class="layui-form-item">
								<div class="layui-input-inline">
									<input type="radio" name="isRemoteor" value="本地调度" title="本地调度调度">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">调度文件导入</label>
								<div class="layui-input-inline">
									<input type="text" name="identity" lay-verify="" placeholder="" autocomplete="off" class="layui-input" value="index.html">
								</div>
								<div class="layui-input-inline">
									<button type="button" class="layui-btn" id="test4"><i class="layui-icon"></i>上传文件</button>

								</div>

							</div>

							<div class="layui-form-item">
								<label class="layui-form-label">参数类型</label>
								<div class="layui-input-inline">
									<select name="quiz">
										<option value="0" selected>电站参数</option>
										<option value="1">设备参数</option>
									</select>
								</div>
								<div class="layui-input-inline">
									<button class="layui-btn" data-type="reload">设备详细参数</button>
								</div>

							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">电站容量</label>
								<div class="layui-input-block">
									<input type="text" name="identity" lay-verify="" placeholder="(0.01~40000000)Kw" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">组件容量</label>
								<div class="layui-input-block">
									<input type="text" name="identity" lay-verify="" placeholder="(0.01~60000000)Kw" autocomplete="off" class="layui-input" value="">
								</div>
							</div>
							<div class="layui-form-item">
								<button class="layui-btn" lay-submit="" lay-filter="demo1">提交</button>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">时间修正</label>
								<div class="layui-input-block">
									<select name="quiz">
										<option value="0" selected>+1</option>
										<option value="1">+2</option>
										<option value="2">+3</option>
										<option value="3">+4</option>
										<option value="4">+5</option>
										<option value="5">-1</option>
										<option value="6">-2</option>
										<option value="7">-3</option>
										<option value="8">-4</option>
										<option value="9">-5</option>
									</select>
								</div>

							</div>
							<div class="layui-form-item">
								<button class="layui-btn" lay-submit="" lay-filter="demo1">提交</button>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">日志选择</label>
								<div class="layui-input-block">
									<select name="quiz">
										<option value="0" selected></option>
									</select>
								</div>

							</div>

							<div class="layui-form-item">
								<button class="layui-btn" lay-submit="" lay-filter="demo1" style="align-content: center;">日志导出</button>
							</div>

						</div>
					</div>
				</div>
			</div>
			<!--本地功率调节-->
			<div class="layui-card-body" hidden="true">
				<div class="layui-form" align="center">
					<div class="layui-form-item">
						<label class="layui-form-label">控制方式</label>
						<div class="layui-input-inline">
							<select name="test1">
								<option value="有功功率固定值" selected>有功功率固定值</option>
							</select>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">上升速度</label>
						<div class="layui-input-block">
							<input type="text" name="upSpeed" lay-verify="" placeholder="(1~5000)" autocomplete="off" class="layui-input" value="">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">下降速度</label>
						<div class="layui-input-block">
							<input type="text" name="downSpeed" lay-verify="" placeholder="(0~6000)" autocomplete="off" class="layui-input" value="">
						</div>
					</div>
					<div class="layui-form-item" style="float: left;">
						<label style="color: red;">有功率固定值范围(Kw):1~10</label>
					</div>
					<div class="layui-form-item">
						<table name="tableValue" class="layui-hide" id="powerSetting" lay-filter="powerSetting"></table>
					</div>
					<div class="layui-form-item" style="float: left;">
						<div class="layui-inline">
							<button class="layui-btn" id="add" lay-submit="" lay-filter="add">添加</button>
							<button class="layui-btn" id="del" lay-submit="" lay-filter="del">删除</button>
						</div>

					</div>
					<div class="layui-form-item">
						<button class="layui-btn" lay-submit="" lay-filter="sub">提交</button>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>
<script>
	layui.use(['table', 'upload'], function() {
		var $ = layui.$,
			table = layui.table,
			form = layui.form,
			upload = layui.upload;
		table.render({
			elem: '#powerSetting',
			url: './json/table/activePower.js',
			cols: [
				[{
					type: 'checkbox'
				}, {
					field: 'id',
					title: 'ID'
				}, {
					field: 'beginTime',
					title: '开始时间',
					edit: 'text'
				}, {
					field: 'value',
					title: '有功功率固定值(Kw)',
					edit: 'text'
				}]
			],
			page: false,
			done: function(res, curr, count) {
				console.log(res); //打印返回结果
				if(res.code === 0) {
					return layer.msg('数据请求成功', {
						offset: '15px',
						icon: 1,
						time: 1000
					});
				} else {
					return layer.msg('借口异常，请稍后再试！', {
						offset: '15px',
						icon: 0,
						time: 1000
					});
				}
			}
		});
		//以复选框事件为例
		table.on('checkbox(powerSetting)', function(obj) {
			var data = obj.data;
			//console.log(obj)
			layer.confirm('真的删除行么', function(index) {
				obj.del();
				layer.close(index);
			});
			console.log('表格中的内容是 ==>' + JSON.stringify(obj.data) + obj.data.id);
		});

		//$('#add').on('click', function(obj) {
		//	console.log('333333333333333');
		//});

		//监听提交
		form.on('submit(sub)', function(data) {
			layer.alert(JSON.stringify(data.field), {
				title: '最终的提交信息'
			})
			return false;
		});

		//监听EMU和本地调节功率时间
		form.on('radio(radioFilter)', function(data) {
			if(data.value == 'EMU') {
				$('.layui-tab').show();
				$('.layui-card-body').hide();
			}
			if(data.value == '本地功率调节') {
				$('.layui-tab').hide();
				$('.layui-card-body').show();
			}
		});

		//上传证书
		upload.render({
			elem: '#test3',
			url: '/upload/',
			accept: 'file' //普通文件
				,
			done: function(res) {
				console.log(res)
			}
		});

		//上传调度文件
		upload.render({
			elem: '#test4',
			url: '/upload/',
			accept: 'file' //普通文件
				,
			done: function(res) {
				console.log(res)
			}
		});
		form.render();
	});
</script>